🤖 ربات تلگرام هوش مصنوعی (Gemini-Powered Telegram Bot)
این یک ربات تلگرام قدرتمند است که با استفاده از API پیشرفته Google Gemini توسعه یافته و قابلیت‌های متنوعی را به کاربران خود ارائه می‌دهد. این ربات به زبان PHP نوشته شده و برای ایجاد تجربه‌ای هوشمند و تعاملی طراحی شده است.

✨ قابلیت‌ها و ویژگی‌ها
این ربات مجموعه‌ای از ویژگی‌های جذاب و کاربردی را ارائه می‌دهد که تجربه کاربری را بهبود می‌بخشد:

پاسخگویی هوشمند: با اتصال به مدل هوش مصنوعی Gemini 1.5 Flash، ربات قادر به درک سوالات و ارائه پاسخ‌های دقیق و مرتبط است.

پشتیبانی از نقش‌های گفتگو (Roles): کاربران می‌توانند نقش‌های مختلفی برای ربات تعریف کنند تا پاسخ‌ها را متناسب با آن نقش دریافت کنند. نقش‌های موجود شامل:

عمومی (Default): دستیار کلی و دوستانه.

برنامه‌نویس (Programmer): ارائه کد تمیز و توضیحات واضح.

شاعر (Poet): پاسخگویی با لحنی ادبی و شاعرانه.

معلم (Teacher): توضیح مباحث پیچیده به زبانی ساده.

مشاور کسب‌وکار (Business Consultant): ارائه مشاوره‌های استراتژیک در زمینه بازاریابی، مدیریت و رشد.

مربی ورزشی (Fitness Coach): ارائه برنامه‌های ورزشی و نکات تغذیه‌ای.

آشپز (Chef): ارائه دستورالعمل‌های آشپزی.

مترجم (Translator): قابلیت ترجمه متون به زبان‌های مختلف (پس از پرسیدن زبان مقصد).

تنظیم لحن گفتگو (Tone Settings): کاربران می‌توانند لحن پاسخ‌های ربات را از بین گزینه‌های زیر انتخاب کنند:

دوستانه (Friendly)

رسمی (Formal)

طنز (Humorous)

ابزارهای تولید محتوا (Content Creation Tools): ربات دارای ابزارهای تخصصی برای تولید محتوای خاص است:

نویسنده مقاله (Article Writer): تولید مقالات ساختاریافته و آموزنده.

پست اینستاگرام (Instagram Post): تولید کپشن‌های جذاب برای اینستاگرام با ایموجی و هشتگ.

ایمیل حرفه‌ای (Professional Email): نگارش ایمیل‌های رسمی و موثر.

مدیریت نرخ درخواست (Rate Limiting): برای جلوگیری از سوءاستفاده و اطمینان از عملکرد پایدار، ربات دارای سیستم محدودیت تعداد پیام در دقیقه و زمان خنک‌سازی بین پیام‌ها است.

مدیریت کاربران و آمار (User & Stats Management):

ثبت کاربران جدید و پیگیری تعداد کل کاربران.

پیگیری تعداد کل پیام‌های ارسالی توسط کاربران.

شناسایی و پیگیری تعداد کاربران مسدود شده.

نمایش آمار کاربران فعال روزانه.

مدیریت کانال‌های اجباری (Mandatory Channel Subscription): قابلیت تعریف کانال‌های تلگرامی که کاربران برای دسترسی کامل به قابلیت‌های ربات باید در آن‌ها عضو شوند.

پنل مدیریت قدرتمند (Admin Panel): ادمین ربات (با تعیین ADMIN_USER_ID) به یک پنل دسترسی جامع از طریق دستور /panel دارد که شامل:

آمار ربات: مشاهده آمار کلی ربات (تعداد کاربران، پیام‌ها، کاربران فعال امروز، کاربران بلاک‌شده).

ارسال همگانی (Broadcast): قابلیت ارسال پیام به تمام کاربران ربات.

وضعیت API جمنای: بررسی لحظه‌ای وضعیت اتصال و پاسخگویی به API هوش مصنوعی Gemini.

مدیریت کانال‌ها: افزودن کانال‌های جدید برای عضویت اجباری و حذف کانال‌های موجود.

گزارش‌دهی خطا (Error Logging): تمام خطاهای مربوط به ارتباط با API تلگرام و جمنای به صورت خودکار در فایل error_log.txt ثبت می‌شوند تا عیب‌یابی آسان‌تر شود.

امنیت کلیدها: کلیدهای حساس (توکن ربات تلگرام و کلید API جمنای) به جای قرار گرفتن مستقیم در کد، از طریق فایل .env-private بارگذاری می‌شوند تا از امنیت آن‌ها اطمینان حاصل شود.

🛠️ راه‌اندازی و نصب
برای راه‌اندازی این ربات روی سرور خود، مراحل زیر را با دقت دنبال کنید:

پیش‌نیازها:

سرور وب با پشتیبانی PHP: (نسخه 7.4 به بالا توصیه می‌شود).

فعال بودن افزونه php_curl: در تنظیمات PHP سرور شما.

دسترسی به اینترنت: برای برقراری ارتباط با API تلگرام و Google Gemini.

توکن ربات تلگرام: از طریق @BotFather در تلگرام آن را دریافت کنید.

کلید API برای Gemini: این کلید را می‌توانید به صورت رایگان از Google AI Studio دریافت کنید.

کلون کردن مخزن:
پروژه را از گیت‌هاب به سرور خود کلون کنید:

Bash

git clone https://github.com/YOUR_USERNAME/YOUR_REPOSITORY_NAME.git
cd YOUR_REPOSITORY_NAME
نکته: YOUR_USERNAME و YOUR_REPOSITORY_NAME را با اطلاعات واقعی مخزن خود جایگزین کنید.

تنظیمات فایل .env-private:
در ریشه اصلی پروژه (همان جایی که فایل‌های index.php و .gitignore قرار دارند)، یک فایل جدید با نام دقیق .env-private ایجاد کنید. محتوای زیر را در آن قرار دهید و مقادیر را با کلیدهای API واقعی خود جایگزین کنید:

GEMINI_KEY = your_gemini_api_key_here
BOT_TOKEN = your_telegram_bot_token_here
❗️ بسیار مهم: این فایل حاوی اطلاعات حساس شماست. هرگز آن را به مخزن گیت‌هاب خود Push نکنید. مطمئن شوید که /user_data/، bot_stats.json، channels.json و .env-private در فایل .gitignore شما به درستی لیست شده‌اند.

تنظیم ADMIN_USER_ID:
فایل اصلی ربات (که در این پروژه index.php است) را باز کنید و مقدار ADMIN_USER_ID را به آیدی عددی تلگرام خودتان تغییر دهید. این شناسه برای دسترسی شما به پنل مدیریت ربات ضروری است.

PHP

const ADMIN_USER_ID = YOUR_TELEGRAM_USER_ID; // <<<< آیدی عددی خودتان را اینجا بگذارید
ایجاد پوشه‌ها و تنظیم مجوزها:
مطمئن شوید که پوشه user_data/ در ریشه پروژه شما وجود دارد و دارای مجوزهای نوشتن (write permissions) است. این پوشه برای ذخیره اطلاعات کاربران و فایل‌های مربوط به آمار استفاده می‌شود. همچنین اطمینان حاصل کنید که فایل‌های bot_stats.json، channels.json و error_log.txt (در صورت وجود) نیز مجوز نوشتن دارند.

تنظیم Webhook تلگرام:
برای اینکه تلگرام بتواند به‌روزرسانی‌ها (پیام‌ها و رویدادهای جدید) را به ربات شما ارسال کند، باید یک وب‌هوک تنظیم کنید. آدرس کامل فایل اصلی ربات (مثلاً https://yourdomain.com/path/to/your/bot/index.php) را به عنوان URL وب‌هوک قرار دهید. می‌توانید این کار را از طریق مرورگر با آدرس زیر انجام دهید:

https://api.telegram.org/bot[YOUR_BOT_TOKEN]/setWebhook?url=https://yourdomain.com/path/to/your/bot/index.php
[YOUR_BOT_TOKEN] را با توکن ربات خود و https://yourdomain.com/path/to/your/bot/index.php را با آدرس واقعی و قابل دسترسی فایل رباتتان جایگزین کنید.

اجرا:
پس از انجام تمام مراحل بالا، ربات شما آماده استفاده است. می‌توانید آن را در تلگرام شروع کرده و از قابلیت‌های آن لذت ببرید!

👨‍💻 توسعه‌دهنده
این ربات توسط مهدی اسکندری در تیم پژواک سورس توسعه داده شده است.

⚠️ نکات مهم
امنیت کلیدها: همانطور که ذکر شد، هرگز توکن ربات تلگرام و کلید API جمنای خود را به صورت مستقیم در کد یا در مخزن گیت‌هاب قرار ندهید. استفاده از فایل .env-private و افزودن آن به .gitignore روشی امن و توصیه شده است.

مجوزهای پوشه و فایل: اطمینان حاصل کنید که تمام پوشه‌ها و فایل‌های مربوط به ذخیره‌سازی داده (مانند user_data/، bot_stats.json، channels.json و error_log.txt) دارای مجوزهای مناسب برای خواندن و نوشتن توسط سرور وب هستند.

Webhooks: این ربات برای دریافت به‌روزرسانی‌ها از تلگرام، از روش Webhook استفاده می‌کند و نه Long Polling. بنابراین تنظیم صحیح وب‌هوک حیاتی است.