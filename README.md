<div dir="rtl">

# 🤖 ربات تلگرام هوش مصنوعی (Gemini-Powered Telegram Bot)

این یک ربات تلگرام قدرتمند است که با استفاده از API پیشرفته Google Gemini توسعه یافته و قابلیت‌های متنوعی را به کاربران خود ارائه می‌دهد. این ربات به زبان PHP نوشته شده و برای ایجاد تجربه‌ای هوشمند و تعاملی طراحی شده است.

---

## ✨ قابلیت‌ها و ویژگی‌ها

این ربات مجموعه‌ای از ویژگی‌های جذاب و کاربردی را ارائه می‌دهد که تجربه کاربری را بهبود می‌بخشد:

-   **پاسخگویی هوشمند:** با اتصال به مدل هوش مصنوعی Gemini 1.5 Flash، ربات قادر به درک سوالات و ارائه پاسخ‌های دقیق و مرتبط است.

-   **پشتیبانی از نقش‌های گفتگو (Roles):** کاربران می‌توانند نقش‌های مختلفی برای ربات تعریف کنند تا پاسخ‌ها را متناسب با آن نقش دریافت کنند. نقش‌های موجود شامل:
    -   **عمومی (Default):** دستیار کلی و دوستانه.
    -   **برنامه‌نویس (Programmer):** ارائه کد تمیز و توضیحات واضح.
    -   **شاعر (Poet):** پاسخگویی با لحنی ادبی و شاعرانه.
    -   **معلم (Teacher):** توضیح مباحث پیچیده به زبانی ساده.
    -   **مشاور کسب‌وکار (Business Consultant):** ارائه مشاوره‌های استراتژیک.
    -   **مربی ورزشی (Fitness Coach):** ارائه برنامه‌های ورزشی و نکات تغذیه‌ای.
    -   **آشپز (Chef):** ارائه دستورالعمل‌های آشپزی.
    -   **مترجم (Translator):** قابلیت ترجمه متون به زبان‌های مختلف.

-   **تنظیم لحن گفتگو (Tone Settings):** کاربران می‌توانند لحن پاسخ‌های ربات را از بین گزینه‌های زیر انتخاب کنند:
    -   دوستانه (Friendly)
    -   رسمی (Formal)
    -   طنز (Humorous)

-   **ابزارهای تولید محتوا (Content Creation Tools):**
    -   **نویسنده مقاله (Article Writer):** تولید مقالات ساختاریافته.
    -   **پست اینستاگرام (Instagram Post):** تولید کپشن‌های جذاب با ایموجی و هشتگ.
    -   **ایمیل حرفه‌ای (Professional Email):** نگارش ایمیل‌های رسمی و موثر.

-   **مدیریت نرخ درخواست (Rate Limiting):** جلوگیری از سوءاستفاده با سیستم محدودیت تعداد پیام در دقیقه.

-   **مدیریت کاربران و آمار (User & Stats Management):**
    -   ثبت و پیگیری تعداد کل کاربران.
    -   پیگیری تعداد کل پیام‌ها.
    -   شناسایی کاربران مسدود شده.
    -   نمایش آمار کاربران فعال روزانه.

-   **مدیریت کانال‌های اجباری (Mandatory Channel Subscription):** قابلیت تعریف کانال برای عضویت اجباری کاربران.

-   **پنل مدیریت قدرتمند (Admin Panel):** ادمین ربات از طریق دستور `/panel` به موارد زیر دسترسی دارد:
    -   آمار کلی ربات
    -   ارسال همگانی (Broadcast)
    -   وضعیت API جمنای
    -   مدیریت کانال‌های اجباری

-   **گزارش‌دهی خطا (Error Logging):** ثبت خودکار خطاها در فایل `error_log.txt` برای عیب‌یابی آسان.

-   **امنیت کلیدها:** بارگذاری کلیدهای حساس (توکن ربات و API جمنای) از طریق فایل `.env-private` برای افزایش امنیت.

---

## 🛠️ راه‌اندازی و نصب

برای راه‌اندازی این ربات روی سرور خود، مراحل زیر را با دقت دنبال کنید:

### پیش‌نیازها:
* سرور وب با پشتیبانی از **PHP نسخه 7.4 به بالا**.
* فعال بودن افزونه `php_curl`.
* توکن ربات تلگرام (دریافت از [@BotFather](https://t.me/BotFather)).
* کلید API برای Gemini (دریافت رایگان از [Google AI Studio](https://aistudio.google.com/)).

### ۱. کلون کردن مخزن:
پروژه را از گیت‌هاب به سرور خود کلون کنید:
<div dir="ltr">

```bash
git clone [https://github.com/YOUR_USERNAME/YOUR_REPOSITORY_NAME.git](https://github.com/YOUR_USERNAME/YOUR_REPOSITORY_NAME.git)
cd YOUR_REPOSITORY_NAME
```
</div>
**نکته:** `YOUR_USERNAME` و `YOUR_REPOSITORY_NAME` را با اطلاعات واقعی مخزن خود جایگزین کنید.

### ۲. تنظیمات فایل `.env-private`:
در ریشه اصلی پروژه، یک فایل جدید با نام `.env-private` ایجاد کنید و محتوای زیر را با مقادیر واقعی خود در آن قرار دهید:
<div dir="ltr">

```env
GEMINI_KEY=your_gemini_api_key_here
BOT_TOKEN=your_telegram_bot_token_here
```
</div>
❗️ **بسیار مهم:** این فایل حاوی اطلاعات حساس شماست. مطمئن شوید که مسیرهای `/user_data/`، `bot_stats.json`، `channels.json` و `.env-private` در فایل `.gitignore` شما لیست شده‌اند تا هرگز به گیت‌هاب Push نشوند.

### ۳. تنظیم `ADMIN_USER_ID`:
فایل اصلی ربات (`index.php`) را باز کرده و `ADMIN_USER_ID` را به آیدی عددی تلگرام خودتان تغییر دهید:
<div dir="ltr">

```php
const ADMIN_USER_ID = YOUR_TELEGRAM_USER_ID; // <<<< آیدی عددی خودتان را اینجا بگذارید
```
</div>

### ۴. ایجاد پوشه‌ها و تنظیم مجوزها:
مطمئن شوید که پوشه `user_data/` در ریشه پروژه وجود دارد و دارای **مجوز نوشتن (write permissions)** است. همچنین فایل‌های `bot_stats.json`، `channels.json` و `error_log.txt` نیز باید مجوز نوشتن داشته باشند.

### ۵. تنظیم Webhook تلگرام:
برای اتصال تلگرام به ربات، آدرس زیر را با مقادیر خود در مرورگر اجرا کنید:
<div dir="ltr">

```
[https://api.telegram.org/bot](https://api.telegram.org/bot)[YOUR_BOT_TOKEN]/setWebhook?url=[https://yourdomain.com/path/to/your/bot/index.php](https://yourdomain.com/path/to/your/bot/index.php)
```
</div>
`[YOUR_BOT_TOKEN]` را با توکن ربات و آدرس `https://yourdomain.com/...` را با URL واقعی فایل رباتتان جایگزین کنید.

### اجرا:
پس از انجام تمام مراحل بالا، ربات شما آماده استفاده است!

---

## 👨‍💻 توسعه‌دهنده

این ربات توسط **مهدی اسکندری** در تیم **پژواک سورس** توسعه داده شده است.

---

## ⚠️ نکات مهم

-   **امنیت کلیدها:** هرگز کلیدهای API خود را در کد یا مخزن عمومی قرار ندهید.
-   **مجوزهای فایل:** از درست بودن مجوزهای خواندن و نوشتن برای فایل‌ها و پوشه‌های مربوط به ذخیره‌سازی داده اطمینان حاصل کنید.
-   **Webhook:** این ربات از روش Webhook استفاده می‌کند، بنابراین تنظیم صحیح آن حیاتی است.

</div>
